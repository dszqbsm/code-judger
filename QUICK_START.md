# ğŸš€ åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿ - å¿«é€Ÿå¯åŠ¨æŒ‡å—

> 5åˆ†é’Ÿå¿«é€Ÿæ­å»ºå®Œæ•´çš„åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿå¼€å‘ç¯å¢ƒ

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£…ï¼š
- **Docker** 20.0+
- **Docker Compose** 2.0+
- **å¯ç”¨å†…å­˜** 4GB+

## âš¡ ä¸€é”®å¯åŠ¨

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <é¡¹ç›®åœ°å€>
cd code-judger

# 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ (è‡ªåŠ¨å¤„ç†æ‰€æœ‰ä¾èµ–)
./start-dev-env.sh
```

ç­‰å¾… 3-5 åˆ†é’Ÿï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ï¼š
- ğŸ“¥ ä¸‹è½½æ‰€æœ‰å¿…éœ€çš„ Docker é•œåƒ
- ğŸ”§ é…ç½®ç³»ç»Ÿå‚æ•°ï¼ˆå¦‚ Elasticsearch çš„ vm.max_map_countï¼‰
- ğŸš€ å¯åŠ¨ 10+ ä¸ªå¾®æœåŠ¡
- âœ… éªŒè¯æ‰€æœ‰æœåŠ¡å¥åº·çŠ¶æ€
- ğŸ“Š æ˜¾ç¤ºè®¿é—®åœ°å€

## ğŸ¯ è®¿é—®æœåŠ¡

å¯åŠ¨å®Œæˆåï¼Œæ‚¨å¯ä»¥ç«‹å³è®¿é—®ï¼š

| æœåŠ¡ | åœ°å€ | ç”¨æˆ·å | å¯†ç  |
|------|------|--------|------|
| ğŸ›ï¸ **Kafka ç®¡ç†** | http://localhost:8080 | - | - |
| ğŸ“ˆ **ç›‘æ§é¢æ¿** | http://localhost:3000 | `admin` | `oj_grafana_admin` |
| ğŸ” **æ—¥å¿—æŸ¥è¯¢** | http://localhost:5601 | - | - |
| ğŸ›ï¸ **æœåŠ¡æ³¨å†Œ** | http://localhost:8500 | - | - |
| ğŸ“Š **ç›‘æ§æŒ‡æ ‡** | http://localhost:9090 | - | - |

## ğŸ”§ å¸¸ç”¨å‘½ä»¤

### å¿«é€Ÿæ“ä½œ
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
make status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
make logs

# éªŒè¯ç¯å¢ƒå®Œæ•´æ€§
make verify

# åœæ­¢æ‰€æœ‰æœåŠ¡
make stop

# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤
make help
```

### æ•°æ®åº“æ“ä½œ
```bash
# è¿æ¥ MySQL æ•°æ®åº“
make db-connect
# ç”¨æˆ·å: oj_user, å¯†ç : oj_password, æ•°æ®åº“: oj_system

# è¿æ¥ Redis
make redis-connect
```

### è°ƒè¯•å’Œç›‘æ§
```bash
# æŸ¥çœ‹ç›‘æ§é¢æ¿åœ°å€
make monitoring-urls

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
make logs-mysql
make logs-kafka
make logs-elk
```

## ğŸ“Š å†…ç½®æ•°æ®

ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨åŒ…å«ï¼š

### æµ‹è¯•ç”¨æˆ·
| ç”¨æˆ·å | å¯†ç  | è§’è‰² | è¯´æ˜ |
|--------|------|------|------|
| `admin` | `admin123` | ç®¡ç†å‘˜ | ç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ· |
| `teacher` | `teacher123` | æ•™å¸ˆ | æ•™å¸ˆè´¦æˆ· |
| `student` | `student123` | å­¦ç”Ÿ | å­¦ç”Ÿè´¦æˆ· |

### ç¤ºä¾‹é¢˜ç›®
- **A + B Problem**: ç»å…¸å…¥é—¨é¢˜ç›®
- **Hello World**: åŸºç¡€è¾“å‡ºé¢˜ç›®

## ğŸ” éªŒè¯ç¯å¢ƒ

è¿è¡Œå®Œæ•´çš„ç¯å¢ƒéªŒè¯ï¼š
```bash
# è¯¦ç»†éªŒè¯ï¼ˆæ¨èï¼‰
./verify-env.sh

# å¿«é€ŸéªŒè¯
./verify-env.sh --quick
```

éªŒè¯å†…å®¹åŒ…æ‹¬ï¼š
- âœ… æ‰€æœ‰æœåŠ¡è¿è¡ŒçŠ¶æ€
- âœ… ç«¯å£è¿é€šæ€§æµ‹è¯•
- âœ… æ•°æ®åº“è¿æ¥å’Œæ•°æ®å®Œæ•´æ€§
- âœ… ç¼“å­˜è¯»å†™æ“ä½œ
- âœ… æ¶ˆæ¯é˜Ÿåˆ—æ”¶å‘æµ‹è¯•
- âœ… æ—¥å¿—ç³»ç»ŸåŠŸèƒ½
- âœ… ç›‘æ§ç³»ç»ŸçŠ¶æ€

## ğŸ› ï¸ å¼€å‘å·¥ä½œæµ

### é¦–æ¬¡ä½¿ç”¨
1. **å¯åŠ¨**: `./start-dev-env.sh`
2. **éªŒè¯**: `./verify-env.sh`
3. **æµè§ˆ**: è®¿é—®å„æœåŠ¡çš„ Web ç•Œé¢

### æ—¥å¸¸å¼€å‘
1. **å¯åŠ¨**: `make start`
2. **å¼€å‘**: ç¼–å†™ä»£ç ï¼ŒæœåŠ¡è‡ªåŠ¨é‡è½½
3. **è°ƒè¯•**: `make logs` æŸ¥çœ‹æ—¥å¿—
4. **åœæ­¢**: `make stop`

### é—®é¢˜æ’æŸ¥
1. **æ£€æŸ¥çŠ¶æ€**: `make status`
2. **æŸ¥çœ‹æ—¥å¿—**: `make logs-<service>`
3. **é‡å¯æœåŠ¡**: `make restart-<service>`
4. **å®Œæ•´éªŒè¯**: `make verify`

## âš ï¸ å¸¸è§é—®é¢˜

### å¯åŠ¨å¤±è´¥
```bash
# æ£€æŸ¥ Docker æœåŠ¡
sudo systemctl status docker

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep :3306

# æ¸…ç†å¹¶é‡æ–°å¯åŠ¨
make clean
make start
```

### å†…å­˜ä¸è¶³
```bash
# åœæ­¢ä¸å¿…è¦çš„æœåŠ¡
docker stop $(docker ps -q)

# æ¸…ç†ç³»ç»Ÿèµ„æº
make clean

# è°ƒæ•´æœåŠ¡å†…å­˜é™åˆ¶ï¼ˆç¼–è¾‘ docker-compose.ymlï¼‰
```

### æƒé™é—®é¢˜
```bash
# æ·»åŠ ç”¨æˆ·åˆ° docker ç»„
sudo usermod -aG docker $USER
logout  # é‡æ–°ç™»å½•ç”Ÿæ•ˆ

# è®¾ç½® Elasticsearch å‚æ•°
sudo sysctl -w vm.max_map_count=262144
```

## ğŸ“š è¿›é˜¶ä½¿ç”¨

### è‡ªå®šä¹‰é…ç½®
1. å¤åˆ¶ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼š`cp env.example .env`
2. ç¼–è¾‘é…ç½®ï¼š`nano .env`
3. é‡å¯æœåŠ¡ï¼š`make restart`

### æ€§èƒ½ç›‘æ§
- **Grafana**: ç³»ç»Ÿæ€§èƒ½ç›‘æ§å’Œå‘Šè­¦
- **Prometheus**: æŒ‡æ ‡æ”¶é›†å’ŒæŸ¥è¯¢
- **Kibana**: æ—¥å¿—åˆ†æå’Œæœç´¢

### æ•°æ®ç®¡ç†
```bash
# æ•°æ®å¤‡ä»½
make db-backup

# æ¸…ç©º Redis ç¼“å­˜
make redis-flushall

# æŸ¥çœ‹ Kafka ä¸»é¢˜
make kafka-topics
```

## ğŸ¯ ä¸‹ä¸€æ­¥

ç¯å¢ƒå°±ç»ªåï¼Œæ‚¨å¯ä»¥ï¼š
1. ğŸ“– æŸ¥çœ‹ [å®Œæ•´æ–‡æ¡£](README.md)
2. ğŸ”§ å¼€å§‹ [å¾®æœåŠ¡å¼€å‘](docs/)
3. ğŸ§ª è¿è¡Œ [é›†æˆæµ‹è¯•](#)
4. ğŸ“Š é…ç½® [ç›‘æ§å‘Šè­¦](#)

## ğŸ†˜ è·å–å¸®åŠ©

- ğŸ“š **è¯¦ç»†æ–‡æ¡£**: `README.md`
- ğŸ³ **Docker é…ç½®**: `DOCKER_SETUP.md`
- âš™ï¸ **æŠ€æœ¯é€‰å‹**: `docs/æŠ€æœ¯é€‰å‹åˆ†æ.md`
- ğŸ’¡ **æ‰€æœ‰å‘½ä»¤**: `make help`

---

**ğŸ‰ æ­å–œï¼æ‚¨çš„åœ¨çº¿åˆ¤é¢˜ç³»ç»Ÿå¼€å‘ç¯å¢ƒå·²å°±ç»ªï¼Œå¼€å§‹æ„‰å¿«çš„å¼€å‘ä¹‹æ—…å§ï¼**